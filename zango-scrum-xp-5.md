# 塹壕より Scrum と XP
- 5章
- さねまつ sanemat, murahashi kenichi

!SLIDE
# 提供
- hiro_y

!SLIDE
# 5. どうやってスプリントを計画するか

!SLIDE
- スプリント計画
    - 極めて重要なミーティング
    - 多分Scrumで最も重要なイベント
        - 数週間ぶん立てるの?
        - あとででてきてた

!SLIDE
# スプリント計画ミーティングの具体的な成果

!SLIDE
- スプリントのゴール
    - 達成したいストーリー? 数字?
    - あとででてきてた

!SLIDE
- チームメンバのリスト
    - 100%でない場合は参加状況

!SLIDE
- スプリントバックログ
    - = そのスプリントに含まれるストーリーのリスト

!SLIDE
- 確定されたスプリントデモの実施日

!SLIDE
- 確定された日時スクラムの場所と時間
    - XPのスタンダップミーティングと話すことは同じなのかなあ?

!SLIDE
# 5.1 プロダクトオーナーが出席すべき理由
- チーム全体**そして**プロダクトオーナー

!SLIDE
- それぞれのストーリーに互いに強く依存し合った3つの変数がある

!SLIDE
- スコープ
    - プロダクトオーナー
- 重要度
    - プロダクトオーナー
- 見積り
    - チーム

!SLIDE
# 例えばこんなミーティング

!SLIDE
- プロダクトオーナーがサマリする
    - 彼のスプリントのゴール
    - 最も重要なストーリー

!SLIDE
- チームがそれぞれのストーリーを確認、時間を見積もっていく
    - スコープに関する質問があがってくる

!SLIDE
- Scrum, 実際にはすべてのアジャイルなソフトウェア開発の基本
- このような直接のやりとり
    - 書いてないけど、そしてその繰り返し、見直し

!SLIDE
# プロダクトオーナーがスプリント計画ミーティング参加をぐずった場合

!SLIDE
- 直接の参加の重要性を説く

!SLIDE
- チームの誰かをプロダクトオーナーの完全な代理人として立てるように要求する

!SLIDE
- 新しいプロダクトオーナーを配置

!SLIDE
- プロダクトオーナーが参加できる時間を見つけられるまで、スプリントの立ち上げを延期する
    - 待ち時間中は、いかなる成果に関するコミットも行わない

!SLIDE
# 5.2 どうして品質については交渉できないのか

!SLIDE
- 4つめの変数 **品質**

!SLIDE
- 内部品質と外部品質

!SLIDE
- 外部品質
    - システムのユーザが認識するもの

!SLIDE
- 内部品質
    - システムの保守性に重大な影響を及ぼすもの
    - 通常ユーザには見えないものに属する

!SLIDE
- ありうる
    - 高い内部品質、低い外部品質

!SLIDE
- めったにない
    - 低い内部品質、高い外部品質

!SLIDE
- 外部品質はスコープの一部
    - ビジネス的に意味を持つ場合もよくあるため
    - トレードオフはプロダクトオーナーに任せる

!SLIDE
- スコープの決定に責任があるのは**プロダクトオーナー**

!SLIDE
- 内部品質
    - 単純に交渉できない

!SLIDE
- システムの品質を維持する責任があるのは**チーム**
    - すべての状況で

!SLIDE
- **たいていは**そうではない

!SLIDE
- 内部品質の問題と外部品質の問題の違いをどう説明するか

!SLIDE
- 「応急処置」って言葉が出たら Alert! Alert! Alert!

!SLIDE
- 内部品質を犠牲にして時間を節約
- 短期的にも超汽笛にもコストの方が高くつく

!SLIDE
- いったんコードベースがひどくなると、あとからその品質を元に戻すのは困難

!SLIDE
- かわりに

!SLIDE
- 議論をスコープに持っていく

!SLIDE
- プロダクトオーナー
    - 内部品質が交渉するものではないといったん学べば
    - 普通は他の変数を変わりにうまく操作してくれる

!SLIDE
# 5.3 スプリント計画ミーティングは踊る、されど進まず…

!SLIDE
- 最も難しい点

!SLIDE
- みんな長時間費やす気がない
- …でも費やしてしまう!

!SLIDE
- Scrumの全ては、タイムボックスで区切られるように出来ている

!SLIDE
- できない場合 スプリント計画ミーティング
    - 切る?
    - のばす?

!SLIDE
- 筆者の場合
    - 短く切る
    - スプリントを実施して耐える

!SLIDE
- 短く区切ってスプリントを回してみる
- **次の**スプリント計画ミーティングは**とても**効果的になる :)

!SLIDE
- タイムボックスを保つことを学び
- 現実的なタイムボックスの長さを学ぶ

!SLIDE
- おなじ!
    - ミーティングの時間
    - スプリントの期間

!SLIDE
# 5.4 スプリント計画ミーティングアジェンダ

!SLIDE
- スケジュールを準備
- タイムボックスを破ってしまうリスクを軽減

!SLIDE
- Scrumマスタは、スケジュールの調整OK
    - ミーティングの進捗に応じて各内容のタイムボックスを長くしたり短くしたり

!SLIDE
# 5.5 スプリントの長さを決める

!SLIDE
- スプリントデモ実施日の決定
    - スプリント計画ミーティングのアウトプットの一つ

!SLIDE
- つまりスプリントの長さを決める

!SLIDE
- 3週間?

!SLIDE
- まずスプリントの長さを**経験してみろ**
- **分析**に時間をかけるな

!SLIDE
- ひとつふたつスプリントを試して長さを変更しろ

!SLIDE
- **しかしながら** ベストな長さをいったん決めたら、長期間それで**固定してみる**

!SLIDE
- 期間中、3週間のスプリントを実施する
    - 期間中?

!SLIDE
# 5.6 スプリントのゴールを決める

!SLIDE
- スプリントゴールを考え出すことは**難しい**

!SLIDE
- でも、くだらないゴールでも、ないよりははるかにマシ!

!SLIDE
- 重要なこと
    - 技術用語でなくビジネス用語で定義するべき
    - チームの外の人も理解できる

!SLIDE
- 「**どうして**僕たち私たちはこのスプリントを実施しているんだ?」

!SLIDE
- ゴールはまだ達成されていないものであるべき

!SLIDE
- スプリント中に使われることもよくある
- 皆がなにをするべきか見失ってしまうようなとき

!SLIDE
- 会社がなにを、なぜやっているかわかるようにするのはとても有用!

!SLIDE
# 5.7 どのストーリーをスプリントに含めるかを決定する

!SLIDE
- プロダクトバックログからどのストーリーをスプリントバックログにコピーするか
    - スプリント計画ミーテイングの主な活動の一つ

!SLIDE
- リストは重要度順にソートされている
- 長方形の大きさはストーリーの大きさ

!SLIDE
- **チームが**決めること
    - そのスプリントにどのくらいのスプリントを含めるかのコミット

!SLIDE
# 5.8 プロダクトオーナはどのストーリーをスプリントに入れ込むかにどうやって影響を及ぼせるのか?

!SLIDE
- プロダクトオーナの出来ること

!SLIDE
- 1. 優先度の再設定

!SLIDE
- 2. スコープの変更
    - ストーリーDがスプリントに収まるとチームが信じられるまで、ストーリーAのスコープを減らす

!SLIDE
- 3. ストーリーの分割
    - ストーリーA1を加える
    - ストーリーDがスプリントに収まる

!SLIDE
- プロダクトオーナ
    - 見積り速度をコントロールできない
    - どのストーリーをスプリントに入れ込むかに影響を及ぼす方法はたくさんある

!SLIDE
# 5.9 チームはどのストーリーをスプリントに含めるかどのように決定するか

!SLIDE
- 直感
- 速度計算

!SLIDE
- 直感
    - できそうかできなそうかで絞っていく
    - 小さいチームで短期のスプリントではとても上手くいく

!SLIDE
- 速度計算
  - 見積り速度を決める
  - 見積り速度を超えることなくいくつのストーリーを追加できるか計算する

!SLIDE
- 速度 = 「完了するための作業量」の測定値のこと
    - ストーリーごとにその初期見積りで重み付けられる
- (どういうこと?)

!SLIDE
- スプリント開始時の**見積り速度**とスプリント終了時の**実際速度**の例
    - 実際速度は、各ストーリーの初期の見積りに基づいていること

!SLIDE
余談
- 完全に出来上がり、出荷可能であり、**完了している**ものを作り上げることに重きをおいている

!SLIDE
- 速度を見積もる方法のひとつ
    - yesterday's weather (昨日の天気)

!SLIDE
- 稼働日数 * 人数 **ではない**
    - ストーリーポイント 理想人日

!SLIDE
- フォーカスファクタ
    - チームがどのくらい集中するかの見積り

!SLIDE
- (稼働人日) * (フォーカスファクタ) = (見積り速度)
    - 作業見積りの人日にn掛けするのとなにが違うの

!SLIDE
- 直前のスプリントのフォーカスファクタ
-- (フォーカスファクタ) = (実際速度) / (稼働人日)

!SLIDE
- 実際速度
    - 直前のスプリントで作業完了したすべてのストーリーの初期見積りを合計したもの
!SLIDE
- yesterdays's weatherに頼りすぎるな

!SLIDE
- 可能な限りいくつかのスプリントを振り返って数値の平均を出す

!SLIDE
- チームが新しい?
    - 似たような条件の別チームのフォーカスファクタを見る

!SLIDE
- 別チームがいない?
    - フォーカスファクタを推測
    - 最初のスプリントだけまずやってみる

!SLIDE
- 筆者のチーム
    - 初期フォーカスファクタ 70%

!SLIDE
- どの見積りテクニックを使うのか
    - どれでもいいんじゃね

!SLIDE
- 理由
- ゴールは単にどのストーリーをスプリントに含めるかを決めること
- フォーカスファクタ、リソースの利用可能性、見積り速度 は達成のための手段に過ぎない

!SLIDE
# 5.10 インデックスカードを使う理由
- Excelと書記が要る
    - うまくいかないよね

!SLIDE
- インデックスカードを作って壁orホワイトボードに張り出す

!SLIDE
- メリット
    - みんなで出来る
    - 身体的
    - あとでインデックスカードをタスクボードとして扱える

!SLIDE
- 重要!
- スプリント計画ミーティング後、Excelに落とすと便利
    - scrumマスタがやってる
- ただ更新サボるとダメですよ

!SLIDE
- 時間見積り アクティビティ

!SLIDE
- チームをいくつかのペアに分割して、並行してそれぞれのストーリーをブレークダウンしていく

!SLIDE
ポストイット

!SLIDE
- Excelのプロダクトバックログにタスク分割を反映していない

!SLIDE
- 流動的なので、メンテのコストに見合わない
- プロダクトオーナはこのレベルはどっちみちいらない

!SLIDE
# 5.11 「完了(done)」を定義する

!SLIDE
- 「本番へ提供できる」

!SLIDE
- 「ストーリーは、Scrumチームのテスタが了承したときに完了する」

!SLIDE
- きっちりしたチェックリストよりも常識的な感覚の方がよいので
- 自分たちチームで決めろよ

!SLIDE
- 混乱するなら「完了の定義」をそれぞれのストーリーにいれておけ

!SLIDE
# 5.12 計画ポーカー(planning poker)をつかた時間見積り

!SLIDE
- 見積りはチームの活動
- 通常全てのチームメンバはすべてのストーリーの見積りに参加する

!SLIDE
- チームに見積りを出すように頼むと、普通はストーリーを最も理解しているメンバがうっかり最初に見積りを出してしまう
- よろしくないことに、これに皆の見積りが大きく影響されてしまう

!SLIDE
- 見積りに大きな食い違いがある場合、議論
- ストーリーに含まれる作業量の**合計**を見積もる
    - 自分の担当部分だけでない
- でも実装する人その人なんじゃない? 別の視点が出てくる可能性もあるのか

!SLIDE
- 注意すべき特別なカード
    - 0
    - ?
    - コーヒーカップ

!SLIDE
# 5.13 ストーリーを明確にする

!SLIDE
- ストーリーについての確実なマッチ
    - プロダクトオーナの理解
    - チームの理解
- チームメンバそれぞれが、それぞれのストーリーについて同じ理解

!SLIDE
- ストーリーの「デモ方法」の記述はとっても簡潔なもの
- ゆえに誤解が覆い隠されてしまうことがままある
    - それは早めに見つけよう

!SLIDE
# 5.14 ストーリーをより小さなストーリーにブレークダウンする

!SLIDE
- 0.5人日ばかり
    - マイクロマネジメントの罠
- 40ポイントのストーリ
    - 部分的にしか作業完了しないリスクが大きい

!SLIDE
- ほとんどの場合、大きなストーリーをより小さなストーリーにブレークダウン出来る
    - より小さなストーリーがちゃんとビジネス価値を備えたものであること

!SLIDE
# 5.15 ストーリーをタスクにブレークダウンする

!SLIDE
- タスクとストーリーの違い
- ストーリー
    - プロダクトオーナが気に掛けるような納品対象
- タスク
    - プロダクトオーナが気に書けないような納品対象外
- p42-43

!SLIDE
- 新しいscrumチームはストーリーからタスクへ前倒しでブレークダウン作業することに時間を使いたくない

!SLIDE
- メリット
    - ストーリーが明確であれば簡単
    - 時間見積りが必要になる新しい追加作業が見つかることがよくあり、より現実なスプリント計画になる
    - 日時スクラムミーティングの効率性が上がる
    - 作業開始後の変更が合ってもメリットは有効

!SLIDE
#5.16 デイリースクラムの時間と場所を決める

!SLIDE
- 正午スクラムの欠点
    - 朝から仕事をする場合、**今日なにをするつもりか**について、**昨日皆に宣言した**ことを覚えていなければいけない
- 朝会の欠点
    - 朝から仕事をする場合、報告するために機能したことを覚えていなければならない
!SLIDE
- 大事なことは、なにを**するつもり**か　なにを**したか**ではない

!SLIDE
- チームの皆が心のそこから同意できる時間にすること

!SLIDE
# 5.17 どこで線を引くか
- 優先度1 スプリントゴールとデモ実施日
- 優先度2 チームが受け入れたこのスプリントで実施するストーリーのリスト
- 優先度3 このスプリントのストーリーそれぞれの見積り
- 優先度4 このスプリントのストーリーそれぞれの「デモ方法」項目

!SLIDE
- 優先度5 速度とリソース計算、このスプリントの計画の実現性チェックとなるもの
- 優先度6 日時スクラムを実施する時刻と場所
- 優先度7 ストーリーをタスクにブレークダウンする

!SLIDE
# 5.18 Tech ストーリー
- Tech stories, 非機能アイテム
- プロダクトオーナに直接価値がないもの

!SLIDE
- 継続ビルドサーバの構築
- システム設計概要の記述
- DAOレイヤのリファクタリング
- Jiraのアップデート

!SLIDE
- プロダクトオーナがトレードオフを正しく検討するためには

!SLIDE
- Teck storiesをビジネス的な価値の図れる通常のストーリーに変換できる手段を探す
- ほかのストーリーのタスクとする
- Teck storiesとして定義して、そのようなストーリー用のリストに分割

!SLIDE
まず同意に達するように試みてもいい

!SLIDE
# 5.19 バグトラッキングシステム vs プロダクトバックログ

!SLIDE
- どうやってJiraの内容をスプリント計画ミーティングに持ち込むんだろう?

!SLIDE
# 5.20 スプリント計画ミーティングはついに終わりぬ！

!SLIDE
- Scrum する際に、スプリント計画ミーティングが最も重要
